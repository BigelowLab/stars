
R version 3.4.3 (2017-11-30) -- "Kite-Eating Tree"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(stars)
Loading required package: dplyr

Attaching package: 'dplyr'

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union

Loading required package: magrittr
Loading required package: sf
Linking to GEOS 3.5.1, GDAL 2.2.1, proj.4 4.9.3
> tif = system.file("tif/L7_ETMs.tif", package = "stars")
> (x = st_stars(tif))
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   :  1.00                                     
 1st Qu.: 54.00                                     
 Median : 69.00                                     
 Mean   : 68.91                                     
 3rd Qu.: 86.00                                     
 Max.   :255.00                                     
dimension(s):
     from  to  offset delta                       refsys point values
x       1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y       1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
band    1   6      NA    NA                           NA    NA   NULL
> 
> #nc = system.file("nc/avhrr-only-v2.19810901.nc", package = "stars")
> #(x = st_stars(nc))
> image(x)
> gdal_crs(tif)
$nbands
[1] 6

$crs
Coordinate Reference System:
  No EPSG code
  proj4string: "+proj=utm +zone=25 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"

$gt
[1]  288776.3      28.5       0.0 9120760.8       0.0     -28.5

$gt_inv
[1] -1.013250e+04  3.508772e-02  0.000000e+00  3.200267e+05  0.000000e+00
[6] -3.508772e-02

> plot(x)
> 
> x + x
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   :  2.0                                      
 1st Qu.:108.0                                      
 Median :138.0                                      
 Mean   :137.8                                      
 3rd Qu.:172.0                                      
 Max.   :510.0                                      
dimension(s):
     from  to  offset delta                       refsys point values
x       1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y       1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
band    1   6      NA    NA                           NA    NA   NULL
> x * x
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   :    1                                      
 1st Qu.: 2916                                      
 Median : 4761                                      
 Mean   : 5512                                      
 3rd Qu.: 7396                                      
 Max.   :65025                                      
dimension(s):
     from  to  offset delta                       refsys point values
x       1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y       1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
band    1   6      NA    NA                           NA    NA   NULL
> x[,,,1:3]
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   : 21.00                                     
 1st Qu.: 58.00                                     
 Median : 70.00                                     
 Mean   : 70.36                                     
 3rd Qu.: 83.00                                     
 Max.   :255.00                                     
dimension(s):
     from  to  offset delta                       refsys point values
x       1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y       1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
band    1   3      NA    NA                           NA    NA   NULL
> x[,1:100,100:200,]
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   : 13.00                                     
 1st Qu.: 54.00                                     
 Median : 65.00                                     
 Mean   : 67.22                                     
 3rd Qu.: 77.00                                     
 Max.   :252.00                                     
dimension(s):
     from  to  offset delta                       refsys point values
x       1 100  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y     100 200 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
band    1   6      NA    NA                           NA    NA   NULL
> sqrt(x)
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   : 1.000                                     
 1st Qu.: 7.348                                     
 Median : 8.307                                     
 Mean   : 8.094                                     
 3rd Qu.: 9.274                                     
 Max.   :15.969                                     
dimension(s):
     from  to  offset delta                       refsys point values
x       1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y       1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
band    1   6      NA    NA                           NA    NA   NULL
> st_apply(x, 3, min)
stars object with 1 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   : 1.00                                      
 1st Qu.: 3.00                                      
 Median :15.00                                      
 Mean   :18.50                                      
 3rd Qu.:29.25                                      
 Max.   :47.00                                      
dimension(s):
     from to offset delta refsys point values
band    1  6     NA    NA     NA    NA   NULL
> st_apply(x, 1:2, max)
stars object with 2 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   : 55.00                                     
 1st Qu.: 85.00                                     
 Median : 96.00                                     
 Mean   : 99.36                                     
 3rd Qu.:113.00                                     
 Max.   :255.00                                     
dimension(s):
  from  to  offset delta                       refsys point values
x    1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y    1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
> st_apply(x, 1:2, range)
stars object with 3 dimensions and 1 attribute
attribute(s):
 /home/edzer/git/stars.Rcheck/stars/tif/L7_ETMs.tif 
 Min.   :  1.00                                     
 1st Qu.: 50.00                                     
 Median : 71.00                                     
 Mean   : 72.44                                     
 3rd Qu.: 96.00                                     
 Max.   :255.00                                     
dimension(s):
      from  to  offset delta                       refsys point values
x        1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL
y        1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL
range    1   2      NA    NA                           NA    NA   NULL
> 
> geomatrix = system.file("tif/geomatrix.tif", package = "stars")
> x = st_stars(geomatrix)
> y = st_transform(x, st_crs(4326))
> 
> proc.time()
   user  system elapsed 
  2.960   0.304   2.970 
