
R version 3.4.2 (2017-09-28) -- "Short Summer"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(stars)
Linking to GDAL 2.2.1, proj.4 4.9.2
> library(sf)
Linking to GEOS 3.5.1, GDAL 2.2.1, proj.4 4.9.2, lwgeom 2.3.3 r15473
> nc = system.file("nc/avhrr-only-v2.19810901.nc", package = "stars")
> #tif = system.file("tif/L7_ETMs.tif", package = "stars")
> (x = st_stars(nc)) #, options = c("OVERVIEW_LEVEL=3")))
sst, anom, err, ice, 
stars object with 4 dimensions and 4 attributes
attribute(s), of first 1e+05 cells:
 sst [degrees C] anom [degrees C] err [degrees C] ice [percentage]
 Min.   :-1.80   Min.   :-4.69    Min.   :0.110   Min.   :0.010   
 1st Qu.:-1.19   1st Qu.:-0.06    1st Qu.:0.300   1st Qu.:0.730   
 Median :-1.05   Median : 0.52    Median :0.300   Median :0.830   
 Mean   :-0.32   Mean   : 0.23    Mean   :0.295   Mean   :0.766   
 3rd Qu.:-0.20   3rd Qu.: 0.71    3rd Qu.:0.300   3rd Qu.:0.870   
 Max.   : 9.36   Max.   : 3.70    Max.   :0.480   Max.   :1.000   
 NA's   :13360   NA's   :13360    NA's   :13360   NA's   :27377   
dimension(s):
     from   to     offset delta  refsys point values
x       1 1440          0  0.25      NA    NA   NULL
y       1  720         90 -0.25      NA    NA   NULL
time    1    1 1981-09-01    NA POSIXct    NA   NULL
zlev    1    1   0 meters    NA      NA    NA   NULL
> # names(x) = "L7_ETM"
> 
> library(abind)
> x = adrop(x)
> image(x)
> (sfc = st_as_sfc(x, as_points = FALSE))
Geometry set for 1036800 features 
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 0 ymin: -90 xmax: 360 ymax: 90
epsg (SRID):    NA
proj4string:    NA
First 5 geometries:
POLYGON ((0 90, 0.25 90, 0.25 89.75, 0 89.75, 0...
POLYGON ((0.25 90, 0.5 90, 0.5 89.75, 0.25 89.7...
POLYGON ((0.5 90, 0.75 90, 0.75 89.75, 0.5 89.7...
POLYGON ((0.75 90, 1 90, 1 89.75, 0.75 89.75, 0...
POLYGON ((1 90, 1.25 90, 1.25 89.75, 1 89.75, 1...
> plot(sfc, add  =TRUE)
> (sfc = st_as_sfc(x, as_points = TRUE))
Geometry set for 1036800 features 
geometry type:  POINT
dimension:      XY
bbox:           xmin: 0.125 ymin: -89.875 xmax: 359.875 ymax: 89.875
epsg (SRID):    NA
proj4string:    NA
First 5 geometries:
POINT (0.125 89.875)
POINT (0.375 89.875)
POINT (0.625 89.875)
POINT (0.875 89.875)
POINT (1.125 89.875)
> plot(sfc, add = TRUE)
> 
> sf = st_as_sf(x, as_points = FALSE)
> plot(sf, border = NA)
> 
> sfc1 <- st_as_sfc(x, as_points = TRUE, use_cpp = TRUE)
> sfc2 <- st_as_sfc(x, as_points = TRUE, use_cpp = FALSE)
> identical(sfc1, sfc2)
[1] TRUE
> 
> sfc1 <- st_as_sfc(x, as_points = FALSE, use_cpp = TRUE)
> sfc2 <- st_as_sfc(x, as_points = FALSE, use_cpp = FALSE)
> identical(sfc1, sfc2)
[1] TRUE
> 
> proc.time()
   user  system elapsed 
757.160   2.368 759.403 
